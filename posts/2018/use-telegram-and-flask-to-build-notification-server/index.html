<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Use Telegram and Flask to build personal notification server | Tony Xu Blog</title>
    <meta name="description" content="Use Telegram and Flask to build personal notification server">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="alternate" type="application/rss+xml" href="https://tonyxu.io/rss.xml" title=" RSS Feed">
  <link rel="alternate" type="application/atom+xml" href="https://tonyxu.io/feed.atom" title=" Atom Feed">
  <link rel="alternate" type="application/json" href="https://tonyxu.io/feed.json" title=" JSON Feed">
    
    <link rel="preload" href="/assets/css/0.styles.86da17ae.css" as="style"><link rel="preload" href="/assets/js/app.007501a4.js" as="script"><link rel="preload" href="/assets/js/2.31767f04.js" as="script"><link rel="preload" href="/assets/js/41.5c459d8e.js" as="script"><link rel="preload" href="/assets/js/12.43813f67.js" as="script"><link rel="prefetch" href="/assets/js/10.9197d645.js"><link rel="prefetch" href="/assets/js/11.5c240e7a.js"><link rel="prefetch" href="/assets/js/13.9f1ed6b9.js"><link rel="prefetch" href="/assets/js/14.fc41af6d.js"><link rel="prefetch" href="/assets/js/15.772010f0.js"><link rel="prefetch" href="/assets/js/16.be1b408c.js"><link rel="prefetch" href="/assets/js/17.240b13cf.js"><link rel="prefetch" href="/assets/js/18.9ab86a5d.js"><link rel="prefetch" href="/assets/js/19.c6f36e70.js"><link rel="prefetch" href="/assets/js/20.4a569e26.js"><link rel="prefetch" href="/assets/js/21.863e427d.js"><link rel="prefetch" href="/assets/js/22.e93e3e08.js"><link rel="prefetch" href="/assets/js/23.47cce37d.js"><link rel="prefetch" href="/assets/js/24.9bc1d72c.js"><link rel="prefetch" href="/assets/js/25.fc426dff.js"><link rel="prefetch" href="/assets/js/26.ee481978.js"><link rel="prefetch" href="/assets/js/27.8f1bc96d.js"><link rel="prefetch" href="/assets/js/28.2ce5e617.js"><link rel="prefetch" href="/assets/js/29.a98718a5.js"><link rel="prefetch" href="/assets/js/3.48902daf.js"><link rel="prefetch" href="/assets/js/30.07c2d9a1.js"><link rel="prefetch" href="/assets/js/31.08c9480d.js"><link rel="prefetch" href="/assets/js/32.04bf30a7.js"><link rel="prefetch" href="/assets/js/33.f82a3ba3.js"><link rel="prefetch" href="/assets/js/34.cbfca3eb.js"><link rel="prefetch" href="/assets/js/35.5f954459.js"><link rel="prefetch" href="/assets/js/36.a074997e.js"><link rel="prefetch" href="/assets/js/37.ac5348c3.js"><link rel="prefetch" href="/assets/js/38.c3b9f779.js"><link rel="prefetch" href="/assets/js/39.e26e453c.js"><link rel="prefetch" href="/assets/js/4.e70ce108.js"><link rel="prefetch" href="/assets/js/40.825afea5.js"><link rel="prefetch" href="/assets/js/42.a327d287.js"><link rel="prefetch" href="/assets/js/43.754227a4.js"><link rel="prefetch" href="/assets/js/44.88df1868.js"><link rel="prefetch" href="/assets/js/45.8b31baf1.js"><link rel="prefetch" href="/assets/js/46.a68a6dea.js"><link rel="prefetch" href="/assets/js/47.27491374.js"><link rel="prefetch" href="/assets/js/48.3a342a3d.js"><link rel="prefetch" href="/assets/js/49.c580aaab.js"><link rel="prefetch" href="/assets/js/5.3ecb7e68.js"><link rel="prefetch" href="/assets/js/50.1cb0320a.js"><link rel="prefetch" href="/assets/js/51.10fbd5ec.js"><link rel="prefetch" href="/assets/js/52.245e095f.js"><link rel="prefetch" href="/assets/js/53.58ce8fc7.js"><link rel="prefetch" href="/assets/js/54.3b368fa1.js"><link rel="prefetch" href="/assets/js/55.1b10fd42.js"><link rel="prefetch" href="/assets/js/56.b3d4fb01.js"><link rel="prefetch" href="/assets/js/57.c1f403f7.js"><link rel="prefetch" href="/assets/js/58.391f8406.js"><link rel="prefetch" href="/assets/js/59.714ba06b.js"><link rel="prefetch" href="/assets/js/6.fd5c7ba0.js"><link rel="prefetch" href="/assets/js/60.a6f70a7e.js"><link rel="prefetch" href="/assets/js/7.5a9583e7.js"><link rel="prefetch" href="/assets/js/8.1225fe1f.js"><link rel="prefetch" href="/assets/js/9.e6e6a7a9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.86da17ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Tony Xu Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/posts/" class="nav-link router-link-active">Posts</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/friends/" class="nav-link">Friends</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Eng/中</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/posts/2018/use-telegram-and-flask-to-build-notification-server/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh/posts/2018/use-telegram-and-flask-to-build-notification-server/" class="nav-link">中文</a></li></ul></div></div> <a href="https://github.com/tonyxu-io/my-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/posts/" class="nav-link router-link-active">Posts</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/friends/" class="nav-link">Friends</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Eng/中</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/posts/2018/use-telegram-and-flask-to-build-notification-server/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh/posts/2018/use-telegram-and-flask-to-build-notification-server/" class="nav-link">中文</a></li></ul></div></div> <a href="https://github.com/tonyxu-io/my-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group first"><p class="sidebar-heading open"><span>Use Telegram and Flask to build personal notification server</span> <!----></p> <ul class="sidebar-group-items"></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="use-telegram-and-flask-to-build-personal-notification-server"><a href="#use-telegram-and-flask-to-build-personal-notification-server" aria-hidden="true" class="header-anchor">#</a> Use Telegram and Flask to build personal notification server</h1> <p>Imagine if you are in these situations:</p> <ol><li>I want to notify my girl friend whenver I leave company or arrive home</li> <li>I want to get notified when there is new visit to my website</li> <li>I want get notified when a scraper or job finished</li></ol> <p>The solution to above situations is a mechanism to send message to your phone programmatically and here is my solution:</p> <p>Build a Flask app to receive GET or POST request, and then compose different messages according to event type and send to some chat channel such as Telegram or Slack. This Flask app can be running in Google App Engine for free, and use your custom domain.</p> <p>The steps to build this Flask app can be found below:</p> <ol><li>Follow Google App Engine tutorial to build a basic Flask app</li> <li>Create a Telegram bot in: https://core.telegram.org/bots#3-how-do-i-create-a-bot</li> <li>Talk with your bot and get the chat id: <code>https://api.telegram.org/bot$TOKEN/getUpdates</code></li> <li>Create a route handler in Flask app and make it be able to make GET request to send message like below: <code>https://api.telegram.org/bot$TOKEN/sendMessage?chat_id=12345&amp;text=Hello+World</code></li> <li>Upload the Flask app to Google App Engine: <code>gcloud app deploy</code></li></ol> <p>Now you have a Flask app to send you message whenever it gets a HTTP request. The message can be pre-defined or passed to it on the flight.</p> <p>Back to the situations I talked about at the beginning, how this Flask app can solve the problems?</p> <ol><li>Install IFTTT app on your phone and allow it to monitor your location, create an action to make webhook request to your Flask endpoint whenever you leave a place or arrive a place.</li> <li>Create a route in Flask app to receive website visit GET request, and then send a message with visitor information (e.g. origin IP) to your Telegram.</li> <li>When a script/job finished, it can make a request to your Flask app endpoint and it can send you notification to notify you it's completed.</li></ol> <p>If you don't have additional logic, messages can be directly sent to Telegram channel without Flask app.</p> <p>This is my Flask app, so for your reference:</p> <p>https://github.com/tonyxu-io/my-api</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/tonyxu-io/my-blog/edit/master/docs/posts/2018/use-telegram-and-flask-to-build-notification-server/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">1/24/2019, 5:56:26 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.007501a4.js" defer></script><script src="/assets/js/2.31767f04.js" defer></script><script src="/assets/js/41.5c459d8e.js" defer></script><script src="/assets/js/12.43813f67.js" defer></script>
  </body>
</html>
